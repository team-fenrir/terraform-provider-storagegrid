---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "storagegrid_s3_bucket_lifecycle_configuration Resource - storagegrid"
subcategory: ""
description: |-
  Manages lifecycle configuration for a StorageGrid S3 bucket.
---

# storagegrid_s3_bucket_lifecycle_configuration (Resource)

Manages lifecycle configuration for a StorageGrid S3 bucket.

## Example Usage

```terraform
# Configure lifecycle rules for the foo bucket
resource "storagegrid_s3_bucket_lifecycle_configuration" "foo" {
  bucket_name = storagegrid_s3_bucket.foo.name

  rule {
    id     = "foo-logs-expiration"
    status = "Enabled"

    filter {
      prefix = "logs/"
    }

    expiration {
      days = 90
    }
  }

  rule {
    id     = "foo-temp-cleanup"
    status = "Enabled"

    filter {
      prefix = "temp/"
    }

    expiration {
      days = 7
    }

    noncurrent_version_expiration {
      noncurrent_days = 1
    }
  }
}

# Configure lifecycle rules for the bar bucket with date-based expiration
resource "storagegrid_s3_bucket_lifecycle_configuration" "bar" {
  bucket_name = storagegrid_s3_bucket.bar.name

  rule {
    id     = "bar-archive-cleanup"
    status = "Enabled"

    filter {
      prefix = "archive/"
    }

    expiration {
      date = "2025-12-31T00:00:00Z"
    }
  }
}

# Simple lifecycle configuration for baz bucket (all objects)
resource "storagegrid_s3_bucket_lifecycle_configuration" "baz" {
  bucket_name = storagegrid_s3_bucket.baz.name

  rule {
    id     = "baz-global-expiration"
    status = "Enabled"

    # No filter = applies to all objects

    expiration {
      days = 365
    }
  }
}

# Reference the buckets created in the bucket example
resource "storagegrid_s3_bucket" "foo" {
  name   = "foo-bucket"
  region = "us-east-1"
}

resource "storagegrid_s3_bucket" "bar" {
  name   = "bar-bucket"
  region = "us-east-1"
}

resource "storagegrid_s3_bucket" "baz" {
  name   = "baz-bucket"
  region = "us-east-1"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_name` (String) The name of the S3 bucket to configure lifecycle for.

### Optional

- `rule` (Block List) Lifecycle rules for the bucket. (see [below for nested schema](#nestedblock--rule))

### Read-Only

- `id` (String) The unique identifier for the lifecycle configuration (same as bucket_name).

<a id="nestedblock--rule"></a>
### Nested Schema for `rule`

Required:

- `status` (String) Status of the rule (Enabled or Disabled).

Optional:

- `expiration` (Block, Optional) Expiration settings for current object versions. (see [below for nested schema](#nestedblock--rule--expiration))
- `filter` (Block, Optional) Filter for the lifecycle rule. (see [below for nested schema](#nestedblock--rule--filter))
- `id` (String) Unique identifier for the rule.
- `noncurrent_version_expiration` (Block, Optional) Expiration settings for noncurrent object versions. (see [below for nested schema](#nestedblock--rule--noncurrent_version_expiration))

<a id="nestedblock--rule--expiration"></a>
### Nested Schema for `rule.expiration`

Optional:

- `date` (String) Date when objects expire (ISO 8601 format).
- `days` (Number) Number of days after object creation when the object expires.


<a id="nestedblock--rule--filter"></a>
### Nested Schema for `rule.filter`

Optional:

- `prefix` (String) Object key prefix that identifies the objects to which the rule applies.


<a id="nestedblock--rule--noncurrent_version_expiration"></a>
### Nested Schema for `rule.noncurrent_version_expiration`

Required:

- `noncurrent_days` (Number) Number of days after an object becomes noncurrent when it expires.
