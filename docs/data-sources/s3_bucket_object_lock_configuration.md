---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "storagegrid_s3_bucket_object_lock_configuration Data Source - storagegrid"
subcategory: ""
description: |-
  Fetches object lock configuration for a StorageGrid S3 bucket.
---

# storagegrid_s3_bucket_object_lock_configuration (Data Source)

Fetches object lock configuration for a StorageGrid S3 bucket.

## Example Usage

```terraform
# Look up object lock configuration for the foo bucket
data "storagegrid_s3_bucket_object_lock_configuration" "foo" {
  bucket_name = "foo-bucket"
}

# Look up object lock configuration for the bar bucket
data "storagegrid_s3_bucket_object_lock_configuration" "bar" {
  bucket_name = "bar-bucket"
}

# Use object lock data to create complementary lifecycle rules
resource "storagegrid_s3_bucket_lifecycle_configuration" "foo" {
  bucket_name = "foo-bucket"

  rule {
    id     = "foo-object-cleanup"
    status = "Enabled"

    filter {
      prefix = "temp/"
    }

    # Set expiration longer than object lock retention period
    expiration {
      days = max(90,
        data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting != null ?
        (data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting.days > 0 ?
        data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting.days + 30 : 90) : 90
      )
    }
  }
}

# Output object lock information
output "foo_default_retention_mode" {
  value = data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting != null ? data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting.mode : null
}

output "foo_default_retention_days" {
  value = data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting != null ? data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting.days : null
}

output "foo_default_retention_years" {
  value = data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting != null ? data.storagegrid_s3_bucket_object_lock_configuration.foo.default_retention_setting.years : null
}

output "bar_object_lock_id" {
  value = data.storagegrid_s3_bucket_object_lock_configuration.bar.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_name` (String) The name of the S3 bucket to fetch object lock configuration for.

### Optional

- `default_retention_setting` (Attributes) Default retention settings for object lock. (see [below for nested schema](#nestedatt--default_retention_setting))

### Read-Only

- `enabled` (Boolean) Whether object lock is enabled for the bucket.

<a id="nestedatt--default_retention_setting"></a>
### Nested Schema for `default_retention_setting`

Optional:

- `days` (Number) Retention period in days.
- `years` (Number) Retention period in years.

Read-Only:

- `mode` (String) The retention mode (compliance or governance).
